
<div class="relative">
  <div [class.border-red-500]="isInvalid"
    class="w-full px-2 py-[0.3rem] border border-gray-300 rounded bg-white focus-within:ring-2 focus-within:ring-primary focus-within:border-transparent">
    <div class="flex flex-wrap gap-2">
      @for (skill of selectedSkills; track skill) {
      <div
        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-primary/20 text-primary">
        {{skill}}
        <button type="button" class="ml-1.5 hover:text-primary/80"
          (click)="removeSkill(skill)">
          <i class="ri-close-line"></i>
        </button>
      </div>
      }

      <input type="text"
        [(ngModel)]="skillInput"
        (focus)="showSkillsDropdown = true"
        (blur)="onInputBlur()"
        [disabled]="isDisabled" [ngClass]="{ 'cursor-not-allowed': isDisabled }"
        placeholder="Type or select option..."
        class="flex-1 min-w-[120px] outline-none text-sm py-0.5">
    </div>
  </div>
  <div
    class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
    <i class="ri ri-arrow-down-s-line text-gray-400"></i>
  </div>

  @if (showSkillsDropdown) {
  <div
    class="absolute z-10 w-full mt-1 py-1 bg-white border border-gray-300 rounded-md shadow-lg">
    <div class="max-h-[200px] overflow-y-auto">
      @for (skill of filterSkills(); track skill) {
      <div class="px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm w-full flex items-center justify-between"
        (mousedown)="addSkill(skill.value)">
        {{skill.label}}
        @if (this.selectedSkills.includes(skill.value)) {
        <i class="ri-check-line text-primary"></i>
        }
      </div>
      }
      @if (filterSkills().length === 0) {
      <div class="px-3 py-2 text-sm text-gray-500">
        No skills found
      </div>
      }
    </div>
  </div>
  }
</div>