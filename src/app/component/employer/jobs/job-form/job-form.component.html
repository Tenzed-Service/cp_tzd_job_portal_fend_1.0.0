<div class="flex items-center justify-center my-2">
    <div
        class="w-full max-w-[1280px] bg-white rounded-lg shadow-md p-8 border-t-4"
        style="border-top-color: #16C2D5">
        <div class="flex items-center justify-center mb-2">
            <i class="ri ri-file-list-3-line text-primary ri-2x"></i>
        </div>
        <h1
            class="text-2xl font-semibold text-center text-gray-800 mb-2">{{jobId
            ? 'Edit' : 'Create'}} Job
            Post</h1>
        <p class="text-gray-600 text-center mb-5">Fill in the details below to
            create a new job posting</p>
        <form [formGroup]="jobForm">
            <div class="grid grid-cols-1 gap-8">
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="jobTitle"
                                class="block text-sm font-medium text-gray-700 mb-1">Job
                                Title <span
                                    class="text-red-500">*</span></label>
                            <app-simple-input
                                formControlName="jobTitle"
                                [isInvalid]="formControl['jobTitle'].invalid && formControl['jobTitle'].touched"
                                [errorList]="[
                                    {
                                        error: formControl['jobTitle'].errors?.['required'],
                                        errorMessage: 'Job title is required' 
                                    }
                                ]"
                                placeholder="Enter job title"></app-simple-input>
                        </div>
                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 mb-1">Job
                                Type <span class="text-red-500">*</span></label>
                            <div class="flex flex-wrap gap-3">
                                <label class="inline-flex items-center">
                                    <input formControlName="jobType"
                                        type="radio" name="jobType"
                                        value="full-time" class="hidden"
                                        checked>
                                    <span
                                        class="px-4 py-1 rounded-full cursor-pointer border border-gray-300 job-type-badge text-sm"
                                        data-type="full-time">
                                        <span class="badge-dot"></span>
                                        Full-time
                                    </span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input formControlName="jobType"
                                        type="radio" name="jobType"
                                        value="part-time" class="hidden">
                                    <span
                                        class="px-4 py-1 rounded-full cursor-pointer border border-gray-300 job-type-badge text-sm"
                                        data-type="part-time">
                                        <span class="badge-dot"></span>
                                        Part-time
                                    </span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input formControlName="jobType"
                                        type="radio" name="jobType"
                                        value="contract" class="hidden">
                                    <span
                                        class="px-4 py-1 rounded-full cursor-pointer border border-gray-300 job-type-badge text-sm"
                                        data-type="contract">
                                        <span class="badge-dot"></span> Contract
                                    </span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input formControlName="jobType"
                                        type="radio" name="jobType"
                                        value="casual" class="hidden">
                                    <span
                                        class="px-4 py-1 rounded-full cursor-pointer border border-gray-300 job-type-badge text-sm"
                                        data-type="casual">
                                        <span class="badge-dot"></span> Casual
                                    </span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label for="email"
                                class="block text-sm font-medium text-gray-700 mb-1">Email
                                <span class="text-red-500">*</span></label>
                            <app-simple-input
                                formControlName="email"
                                [isInvalid]="formControl['email'].invalid && formControl['email'].touched"
                                [errorList]="[
                                    {
                                        error: formControl['email'].errors?.['required'],
                                        errorMessage: 'Email is required' 
                                    },
                                    {
                                        error: formControl['email'].errors?.['email'],
                                        errorMessage: 'Please enter a valid email address' 
                                    }
                                ]"
                                placeholder="Enter email address"></app-simple-input>
                        </div>
                        <div>
                            <label for="phone"
                                class="block text-sm font-medium text-gray-700 mb-1">Contact
                                No. <span class="text-red-500">*</span></label>
                            <div class="relative">
                                <div class="absolute w-20 h-full">
                                    <select formControlName="countryCode"
                                        id="countryCode"
                                        [class.border-red-500]="formControl['contact'].invalid && formControl['contact'].touched"
                                        class="relative bg-transparent appearance-none border border-gray-300 border-l-0 w-full h-full left-2 top-0 pl-2 pr-1 text-sm focus:outline-none">
                                        <option value="+1">+1</option>
                                        <option value="+44">+44</option>
                                        <option value="+91">+91</option>
                                        <option value="+86">+86</option>
                                    </select>
                                    <div
                                        class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                        <i
                                            class="ri ri-arrow-down-s-line text-gray-400"></i>
                                    </div>
                                </div>
                                <input formControlName="contact" type="number"
                                    id="contact"
                                    placeholder="Enter contact number"
                                    [class.border-red-500]="formControl['contact'].invalid && formControl['contact'].touched"
                                    class="w-full pl-24 pr-4 py-[0.32rem] text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#16c2d5]/20 focus:border-[#16c2d5]" />
                            </div>
                            @if (formControl['contact'].invalid &&
                            formControl['contact'].touched) {
                            <small class="text-red-500">
                                Contact number is required
                            </small>
                            }
                        </div>
                        <div>
                            <label for="startTime"
                                class="block text-sm font-medium text-gray-700 mb-1">Job
                                Start Time <span
                                    class="text-red-500">*</span></label>
                            <app-date-time
                                formControlName="startTime"
                                [isInvalid]="formControl['startTime'].invalid && formControl['startTime'].touched"
                                errorMessage="Start time is required"></app-date-time>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label for="endTime"
                                class="block text-sm font-medium text-gray-700 mb-1">Job
                                End Time <span
                                    class="text-red-500">*</span></label>
                            <app-date-time
                                formControlName="endTime"
                                [isInvalid]="formControl['endTime'].invalid && formControl['endTime'].touched"
                                errorMessage="End time is required"></app-date-time>
                        </div>
                        <div>
                            <label for="experience"
                                class="block text-sm font-medium text-gray-700 mb-1">Experience
                                (months) <span
                                    class="text-red-500">*</span></label>
                            <input formControlName="experience" type="number"
                                id="experience" min="0"
                                placeholder="Enter experience in months"
                                [class.border-red-500]="formControl['experience'].invalid && formControl['experience'].touched"
                                class="w-full px-4 py-[0.32rem] text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#16c2d5]/20 focus:border-[#16c2d5]" />
                            @if (formControl['experience'].invalid &&
                            formControl['experience'].touched) {
                            <small class="text-red-500">
                                @if(formControl['experience'].errors?.['required']){
                                Experience is required
                                }
                                @else if(formControl['experience'].errors?.['min']){
                                Experience must be a positive number
                                }
                            </small>
                            }
                        </div>
                        <div>
                            <label for="dueDate"
                                class="block text-sm font-medium text-gray-700 mb-1">Due
                                Date <span class="text-red-500">*</span></label>
                            <app-date
                                formControlName="dueDate"
                                [isInvalid]="formControl['dueDate'].invalid && formControl['dueDate'].touched"
                                errorMessage="Due date is required"></app-date>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label for="amount"
                                class="block text-sm font-medium text-gray-700 mb-1">Amount
                                <span class="text-red-500">*</span></label>
                            <input formControlName="amount" type="number"
                                id="amount" min="0" step="0.01"
                                placeholder="Enter amount"
                                [class.border-red-500]="formControl['amount'].invalid && formControl['amount'].touched"
                                class="w-full px-4 py-[0.32rem] text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#16c2d5]/20 focus:border-[#16c2d5]" />
                            @if (formControl['amount'].invalid &&
                            formControl['amount'].touched) {
                            <small class="text-red-500">
                                @if(formControl['amount'].errors?.['required']){
                                Amount is required
                                }
                                @else if(formControl['amount'].errors?.['min']){
                                Amount must be a positive number
                                }
                            </small>
                            }
                        </div>
                        <div>
                            <label for="amountType"
                                class="block text-sm font-medium text-gray-700 mb-1">Amount
                                Type <span class="text-red-500">*</span></label>
                            <app-selection
                                [isInvalid]="formControl['amountType'].invalid && formControl['amountType'].touched? true : false"
                                [dropDownListData]="amountTypeList"
                                [errorList]="[
                                    {
                                        error: formControl['amountType'].errors?.['required'],
                                        errorMessage: 'Amount type is required' 
                                    }
                                ]"
                                formControlName="amountType"></app-selection>
                        </div>
                        <div>
                            <label for="skills"
                                class="block text-sm font-medium text-gray-700 mb-1">Required
                                Skills <span
                                    class="text-red-500">*</span></label>
                            <app-multi-selection
                                [isInvalid]="formControl['skills'].invalid && formControl['skills'].touched? true : false"
                                [dropDownListData]="skillList"
                                [errorList]="[
                                    {
                                        error: formControl['skills'].errors?.['required'],
                                        errorMessage: 'Minimum one skill is required'
                                    } 
                                ]"
                                formControlName="skills"></app-multi-selection>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label
                            class="block text-sm font-medium text-gray-700 mb-1">Job
                            Locations <span
                                class="text-red-500">*</span></label>
                        <div formArrayName="locations" id="locationsContainer">
                            @for (location of locations.controls; track
                            location; let no = $index) {
                            <div [formGroupName]="no"
                                class="location-entry border border-gray-200 rounded-lg p-4 mb-4">
                                <div
                                    class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div>
                                        <div>
                                            <label
                                                class="block text-sm font-medium text-gray-600 mb-1">Address
                                                Line 1 <span
                                                    class="text-red-500">*</span></label>
                                            <input
                                                formControlName="addressLine1"
                                                type="text"
                                                [class.border-red-500]="locations.at(no).get('addressLine1')?.invalid && locations.at(no).get('addressLine1')?.touched"
                                                class="address-1 w-full px-4 py-[0.32rem] text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#16c2d5]/20 focus:border-[#16c2d5]"
                                                placeholder="Enter address line 1" />
                                            @if
                                            (locations.at(no).get('addressLine1')?.invalid
                                            &&
                                            locations.at(no).get('addressLine1')?.touched)
                                            {
                                            <small class="text-red-500">
                                                Address line 1 is required
                                            </small>
                                            }
                                        </div>
                                    </div>
                                    <div>
                                        <div>
                                            <label
                                                class="block text-sm font-medium text-gray-600 mb-1">Address
                                                Line 2</label>
                                            <input
                                                formControlName="addressLine2"
                                                type="text"
                                                class="address-2 w-full px-4 py-[0.32rem] text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#16c2d5]/20 focus:border-[#16c2d5]"
                                                placeholder="Enter address line 2">
                                        </div>
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-medium text-gray-600 mb-1">Country
                                            <span
                                                class="text-red-500">*</span></label>
                                        <app-selection
                                            [isInvalid]="locations.at(no).get('country')?.invalid && locations.at(no).get('country')?.touched? true : false"
                                            [dropDownListData]="countryList"
                                            [errorList]="[
                                    {
                                        error: locations.at(no).get('country')?.errors?.['required'],
                                        errorMessage: 'Country is required' 
                                    }
                                ]"
                                            formControlName="country"></app-selection>
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-medium text-gray-600 mb-1">State/Province
                                            <span
                                                class="text-red-500">*</span></label>
                                        <app-selection
                                            [isInvalid]="locations.at(no).get('state')?.invalid && locations.at(no).get('state')?.touched ? true : false"
                                            [dropDownListData]="stateList"
                                            [errorList]="[
                                    {
                                        error: locations.at(no).get('state')?.invalid && locations.at(no).get('state')?.touched ? true : false,
                                        errorMessage: 'State is required' 
                                    }
                                ]"
                                            formControlName="state"></app-selection>
                                    </div>
                                </div>
                                <div
                                    class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div>
                                        <label
                                            class="block text-sm font-medium text-gray-600 mb-1">City
                                            <span
                                                class="text-red-500">*</span></label>
                                        <app-selection
                                            [isInvalid]="locations.at(no).get('city')?.invalid && locations.at(no).get('city')?.touched ? true : false"
                                            [dropDownListData]="cityList"
                                            [errorList]="[
                                                {
                                                    error: locations.at(no).get('city')?.invalid && locations.at(no).get('city')?.touched ? true : false,
                                                    errorMessage: 'City is required' 
                                                }
                                            ]"
                                            formControlName="city"></app-selection>
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-medium text-gray-600 mb-1">ZIP/Postal
                                            Code <span
                                                class="text-red-500">*</span></label>
                                        <input formControlName="zipCode"
                                            type="text"
                                            [class.border-red-500]="locations.at(no).get('zipCode')?.invalid && locations.at(no).get('zipCode')?.touched"
                                            class="zip w-full px-4 py-[0.32rem] text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#16c2d5]/20 focus:border-[#16c2d5]"
                                            placeholder="Enter ZIP/postal code" />
                                        @if
                                        (locations.at(no).get('zipCode')?.invalid
                                        &&
                                        locations.at(no).get('zipCode')?.touched)
                                        {
                                        <small class="text-red-500">
                                            ZIP/postal code is required
                                        </small>
                                        }
                                    </div>
                                </div>
                                <div class="flex justify-end">
                                    <button type="button"
                                        (click)="removeLocation(no)"
                                        class="remove-location text-red-500 hover:text-red-500/80 text-sm flex items-center">
                                        <i
                                            class="ri ri-delete-bin-line mr-1"></i>
                                        Remove Location
                                    </button>
                                </div>
                            </div>
                            }
                        </div>
                        <button type="button" id="addLocation"
                            (click)="addLocation()"
                            class="mb-6 text-[#16C2D5] hover:text-[#16C2D5]/80 text-sm flex items-center !rounded-button">
                            <i class="ri ri-add-circle-line mr-1"></i>
                            Add Another Location
                        </button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label for="languages"
                                class="block text-sm font-medium text-gray-700 mb-1">Required
                                Languages <span
                                    class="text-red-500">*</span></label>
                            <app-multi-selection
                                [isInvalid]="formControl['languages'].invalid && formControl['languages'].touched? true : false"
                                [dropDownListData]="languageList"
                                [errorList]="[
                                    {
                                        error: formControl['languages'].errors?.['required'],
                                        errorMessage: 'Minimum one language is required'
                                    }
                                ]"
                                formControlName="languages"></app-multi-selection>
                        </div>
                        <div>
                            <label for="applicants"
                                class="block text-sm font-medium text-gray-700 mb-1">Number
                                of Applicants Needed <span
                                    class="text-red-500">*</span></label>
                            <input formControlName="applicants" type="number"
                                id="applicants" min="1"
                                placeholder="Enter number of applicants"
                                [class.border-red-500]="formControl['applicants'].invalid && formControl['applicants'].touched"
                                class="w-full px-4 py-[0.32rem] text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#16c2d5]/20 focus:border-[#16c2d5]" />
                            @if (formControl['applicants'].invalid &&
                            formControl['applicants'].touched) {
                            <small class="text-red-500">
                                Number of applicants is required
                            </small>
                            }
                        </div>
                        <div>
                            <label for="status"
                                class="block text-sm font-medium text-gray-700 mb-1">Status
                                <span class="text-red-500">*</span></label>
                            <app-selection
                                [isInvalid]="formControl['status'].invalid && formControl['status'].touched? true : false"
                                [dropDownListData]="statusList"
                                [errorList]="[
                                    {
                                        error: formControl['status'].errors?.['required'],
                                        errorMessage: 'Status is required' 
                                    }
                                ]"
                                formControlName="status"></app-selection>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label for="description"
                            class="block text-sm font-medium text-gray-700 mb-1">Description
                            <span class="text-red-500">*</span></label>
                        <textarea formControlName="description" id="description"
                            rows="4"
                            [class.border-red-500]="formControl['description'].invalid && formControl['description'].touched"
                            class="w-full px-4 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#16c2d5]/20 focus:border-[#16c2d5]"></textarea>
                        @if (formControl['description'].invalid &&
                        formControl['description'].touched) {
                        <small class="text-red-500">
                            Description is required
                        </small>
                        }
                    </div>
                </div>
            </div>
            <div class="mt-4 bg-white">
                <button type="submit" (click)="onSubmit()"
                    class="w-full text-white font-medium py-3 !rounded-button transition duration-300 whitespace-nowrap"
                    style="background: linear-gradient(90deg, rgba(22, 194, 213, 1) 0%, rgba(16, 33, 125, 1) 100%)">Post
                    Job</button>
            </div>
        </form>
    </div>
</div>