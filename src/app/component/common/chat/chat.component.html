<div class="flex h-[calc(100vh-90px)] bg-white mt-4 rounded">
    <!-- Conversations List -->
    <div class="w-80 border-r border-gray-200 flex flex-col">
        <div class="p-3 border-b border-gray-200">
            <div class="relative">
                <input type="text" placeholder="Search conversations..."
                    class="w-full pl-9 pr-4 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary">
                <div
                    class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                    <div class="w-4 h-4 flex items-center justify-center">
                        <i class="ri-search-line"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex-1 overflow-y-auto mt-2">
            <div class="space-y-1">
                @for (conversation of conversationData; track $index) {
                    <div class="p-3 cursor-pointer" (click)="selectConversation(conversation)"
                        [ngClass]="{
                            'bg-[#E6F7FA]':selectedUser?.id === conversation?.id,
                            'hover:bg-gray-100':selectedUser?.id !== conversation?.id,
                        }">
                        <div class="flex items-center justify-between mb-1">
                            <div class="flex items-center">
                                <img class="w-10 h-10 rounded-full mr-3"
                                [src]="conversation.image"
                                [alt]="conversation.name">
                                <div>
                                    <h4 class="font-medium text-gray-900">
                                        {{ conversation.title ? conversation.title + ' ' : '' }}{{ conversation.name }}
                                    </h4>
                                    <p class="text-sm"
                                        [ngClass]="{
                                        'text-primary': selectedUser?.id === conversation?.id,
                                        'text-gray-500': selectedUser?.id !== conversation?.id
                                        }">
                                        {{ conversation.message }}
                                    </p>
                                </div>
                            </div>
                            <div class="flex flex-col items-end">
                                <span class="text-xs text-gray-500">{{ conversation.timestamp }}</span>
                                @if (conversation.unreadCount > 0) {
                                <span class="bg-primary text-white text-xs w-5 h-5 flex items-center justify-center rounded-full mt-1">
                                    {{ conversation.unreadCount }}
                                </span>
                                }
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    <!-- Chat Content -->
    <div class="flex-1 flex flex-col">
        <div
            class="p-2 border-b border-gray-200 flex items-center justify-between">
            <div class="flex items-center">
                <img class="w-10 h-10 rounded-full mr-3"
                [src]="selectedUser?.image"
                [alt]="selectedUser?.name">
                <div>
                    <h3 class="font-medium text-gray-900">{{selectedUser?.title + ' '+ selectedUser?.name}}</h3>
                    <p class="text-sm text-gray-500">Online</p>
                </div>
            </div>
        </div>
        <div class="flex-1 overflow-y-auto p-4 space-y-4">
            <!-- Message Thread -->
            <div class="flex items-start">
                <img class="w-8 h-8 rounded-full mr-3"
                [src]="selectedUser?.image"
                [alt]="selectedUser?.name">
                <div class="bg-gray-100 rounded p-3 max-w-[70%]">
                    <p class="text-gray-900">Hi James, I've completed updating
                        the contact information for all patients in the
                        system.</p>
                    <span class="text-xs text-gray-500 mt-1">10:23 AM</span>
                </div>
            </div>
            <div class="flex items-start justify-end">
                <div class="bg-primary text-white rounded p-3 max-w-[70%]">
                    <p>Great work! Did you encounter any issues during the
                        update?</p>
                    <span class="text-xs text-white opacity-80 mt-1">10:25
                        AM</span>
                </div>
            </div>
            <div class="flex items-start">
                <img class="w-8 h-8 rounded-full mr-3"
                [src]="selectedUser?.image"
                [alt]="selectedUser?.name">
                <div class="bg-gray-100 rounded p-3 max-w-[70%]">
                    <p class="text-gray-900">No major issues. The new system is
                        working smoothly. I'll start verifying insurance
                        information next.</p>
                    <span class="text-xs text-gray-500 mt-1">10:26 AM</span>
                </div>
            </div>
            <div class="flex items-start justify-end">
                <div class="bg-primary text-white rounded p-3 max-w-[70%]">
                    <p>Great work! Did you encounter any issues during the
                        update?</p>
                    <span class="text-xs text-white opacity-80 mt-1">10:25
                        AM</span>
                </div>
            </div>
            <div class="flex items-start">
                <img class="w-8 h-8 rounded-full mr-3"
                [src]="selectedUser?.image"
                [alt]="selectedUser?.name">
                <div class="bg-gray-100 rounded p-3 max-w-[70%]">
                    <p class="text-gray-900">No major issues. The new system is
                        working smoothly. I'll start verifying insurance
                        information next.</p>
                    <span class="text-xs text-gray-500 mt-1">10:26 AM</span>
                </div>
            </div>
            <div class="flex items-start justify-end">
                <div class="bg-primary text-white rounded p-3 max-w-[70%]">
                    <p>Great work! Did you encounter any issues during the
                        update?</p>
                    <span class="text-xs text-white opacity-80 mt-1">10:25
                        AM</span>
                </div>
            </div>
            <div class="flex items-start">
                <img class="w-8 h-8 rounded-full mr-3"
                [src]="selectedUser?.image"
                [alt]="selectedUser?.name">
                <div class="bg-gray-100 rounded p-3 max-w-[70%]">
                    <p class="text-gray-900">No major issues. The new system is
                        working smoothly. I'll start verifying insurance
                        information next.</p>
                    <span class="text-xs text-gray-500 mt-1">10:26 AM</span>
                </div>
            </div>
            <div class="flex items-start justify-end">
                <div class="bg-primary text-white rounded p-3 max-w-[70%]">
                    <p>Great work! Did you encounter any issues during the
                        update?</p>
                    <span class="text-xs text-white opacity-80 mt-1">10:25
                        AM</span>
                </div>
            </div>
            <div class="flex items-start">
                <img class="w-8 h-8 rounded-full mr-3"
                [src]="selectedUser?.image"
                [alt]="selectedUser?.name">
                <div class="bg-gray-100 rounded p-3 max-w-[70%]">
                    <p class="text-gray-900">No major issues. The new system is
                        working smoothly. I'll start verifying insurance
                        information next.</p>
                    <span class="text-xs text-gray-500 mt-1">10:26 AM</span>
                </div>
            </div>
        </div>
        <!-- Message Input Area -->
        <div class="p-3 border-t border-gray-200">
            <div class="flex items-end space-x-3">
                <div class="flex-1 bg-gray-100 rounded-lg p-1">
                    <div class="flex items-center">
                        <button
                            class="p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-full">
                            <div
                                class="w-5 h-5 flex items-center justify-center">
                                <i class="ri-attachment-2"></i>
                            </div>
                        </button>
                        <textarea
                            class="flex-1 bg-transparent border-none focus:outline-none resize-none text-sm py-1 px-2"
                            rows="1"
                            placeholder="Type your message..."></textarea>
                    </div>
                </div>
                <button
                    class="p-2 bg-primary text-white rounded-full hover:bg-primary-dark">
                    <div class="w-5 h-5 flex items-center justify-center">
                        <i class="ri-send-plane-fill"></i>
                    </div>
                </button>
            </div>
        </div>
    </div>
</div>